<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FAQ &mdash; gstreamer_tutorial 1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=29a6c3e3"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
        <script src="../_static/design-tabs.js?v=36754332"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="v4l-utils" href="tool.html" />
    <link rel="prev" title="人工智能概论" href="overview.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            gstreamer_tutorial
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../1.basic/index.html">1. GStreamer 基础</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2.tutorial/index.html">2. GStreamer 教程</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">3. GStreamer 应用</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">人工智能概论</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what">What</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-state-of-a-pipeline">What state of a pipeline?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#how-to">How to</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-to-start-playing-a-video-at-a-specific-point-in-time-with-hls">How to Start Playing a Video at a Specific Point in Time with HLS?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-set-width-and-height-of-video">How to set width and height of video</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-send-video-from-one-host-over-udp">How to send video from one host over udp?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#test-video">test video</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-capture-video-from-desktop">How to capture video from desktop</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-capture-video-from-camera-to-264-file">How to capture video from camera to 264 file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-play-hls-stream">How to play HLS stream?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#camera">camera</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-make-a-gstreamer-plugin">How to make a gstreamer plugin</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#reference">Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="tool.html">v4l-utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="tool.html#gst-python">Gst Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="tool.html#gstreamer-tools">GStreamer Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="tool.html#pipeline">如何在命令行下建立一个pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="tool.html#elementcapabilities">如何找出一个element的Capabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="tool.html#id1">如何发现一个媒体文件的内部结构</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../4.plugin/index.html">3. GStreamer 插件</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">gstreamer_tutorial</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">3. GStreamer 应用</a></li>
      <li class="breadcrumb-item active">FAQ</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/3.application/faq.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="faq">
<h1>FAQ<a class="headerlink" href="#faq" title="Link to this heading"></a></h1>
</section>
<section id="what">
<h1>What<a class="headerlink" href="#what" title="Link to this heading"></a></h1>
<section id="what-state-of-a-pipeline">
<h2>What state of a pipeline?<a class="headerlink" href="#what-state-of-a-pipeline" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>NULL：element创建出来后的默认状态，没有分配任何资源。其他状态转换到此状态，会设防所有的资源。</p></li>
<li><p>READY：就绪状态。element已分配了所有资源，还没有打开流。</p></li>
<li><p>PAUSED：element已打开流，但还没对其进行处理。与PLAYING状态相比，只缺少时钟。</p></li>
<li><p>PLAYING：element中的时钟开始运行，流不断通过pipeline</p></li>
</ul>
</section>
</section>
<section id="how-to">
<h1>How to<a class="headerlink" href="#how-to" title="Link to this heading"></a></h1>
<section id="how-to-start-playing-a-video-at-a-specific-point-in-time-with-hls">
<h2>How to Start Playing a Video at a Specific Point in Time with HLS?<a class="headerlink" href="#how-to-start-playing-a-video-at-a-specific-point-in-time-with-hls" title="Link to this heading"></a></h2>
<p>Use the EXT-X-START tag. It’s optional, but if it’s present in a playlist it specifies the preferred point in the video to start playback.</p>
<p>The following attributes are defined in the spec for the EXT-X-START tag:</p>
<ul class="simple">
<li><p>TIME-OFFSET – (required) The offset in seconds to start playing the video. If the value is negative, specifies the time from the end of the playlist. The offset must not be larger than the playlist duration.</p></li>
<li><p>PRECISE – (optional) Valid string values: YES, NO. If YES, playback starts at the point specified by TIME-OFFSET but does not render frames in the segment prior to the offset. Default is NO.</p></li>
</ul>
<p>例如</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#EXT-X-START:TIME-OFFSET=25,PRECISE=YES</span>
</pre></div>
</div>
</section>
<section id="how-to-set-width-and-height-of-video">
<h2>How to set width and height of video<a class="headerlink" href="#how-to-set-width-and-height-of-video" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 videotestsrc ! video/x-raw, format=BGR ! autovideoconvert ! videoconvert ! video/x-raw, width=640, height=480, framerate=1/2 ! ximagesink
</pre></div>
</div>
</section>
<section id="how-to-send-video-from-one-host-over-udp">
<h2>How to send video from one host over udp?<a class="headerlink" href="#how-to-send-video-from-one-host-over-udp" title="Link to this heading"></a></h2>
<section id="test-video">
<h3>test video<a class="headerlink" href="#test-video" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>sender</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 -v videotestsrc ! x264enc ! rtph264pay pt=96 ! udpsink host=192.168.104.214 port=5000
</pre></div>
</div>
<ul class="simple">
<li><p>receiver</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 -v udpsrc port=500 caps=application/x-rtp ! rtph264depay ! avdec_h264 ! autovideosink
</pre></div>
</div>
</section>
</section>
<section id="how-to-capture-video-from-desktop">
<h2>How to capture video from desktop<a class="headerlink" href="#how-to-capture-video-from-desktop" title="Link to this heading"></a></h2>
<p>refer to https://github.com/xmementoit/gstreamerCheatsheet/blob/master/README.md</p>
</section>
<section id="how-to-capture-video-from-camera-to-264-file">
<h2>How to capture video from camera to 264 file<a class="headerlink" href="#how-to-capture-video-from-camera-to-264-file" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 v4l2src device=/dev/video2 ! nvvidconv ! &#39;video/x-raw(memory:NVMM),format=NV12,width=640,height=360,fps=30&#39; ! nvv4l2h264enc insert-sps-pps=true bitrate=1000000 ! filesink location=./test.264
</pre></div>
</div>
</section>
<section id="how-to-play-hls-stream">
<h2>How to play HLS stream?<a class="headerlink" href="#how-to-play-hls-stream" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> gst-launch-1.0 souphttpsrc location=http://devimages.apple.com/iphone/samples/bipbop/gear4/prog_index.m3u8 ! hlsdemux ! decodebin ! videoconvert ! videoscale ! autovideosink
</pre></div>
</div>
<p>or use https://github.com/videojs/http-streaming</p>
<p>refer to https://gstreamer.freedesktop.org/documentation/hls/hlsdemux.html?gi-language=c</p>
<ol class="arabic simple">
<li><p>在本地生成 playlist.m3u8 和 TS 文件</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> gst-launch-1.0 videotestsrc is-live=true ! x264enc ! h264parse ! hlssink2 max-files=5
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>启动 web server： <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">-m</span> <span class="pre">http.server</span></code></p></li>
<li><p>播放 HLS m3u8 和相应的 TS</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gst</span><span class="o">-</span><span class="n">play</span><span class="o">-</span><span class="mf">1.0</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8000</span><span class="o">/</span><span class="n">playlist</span><span class="o">.</span><span class="n">m3u8</span> <span class="o">--</span><span class="n">use</span><span class="o">-</span><span class="n">playbin</span>
</pre></div>
</div>
<p>或者</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 souphttpsrc location=http://localhost:8000/playlist.m3u8 ! hlsdemux ! decodebin ! videoconvert ! videoscale ! autovideosink
</pre></div>
</div>
<section id="camera">
<h3>camera<a class="headerlink" href="#camera" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Sender</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>gst-launch-1.0 -v v4l2src device=/dev/video1 ! decodebin ! videoconvert ! omxh264enc ! video/x-h264,stream-format=byte-stream ! rtph264pay ! udpsink host=192.168.104.214 port=5000

</pre></div>
</div>
<ul class="simple">
<li><p>receiver</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
gst-launch-1.0 -v udpsrc  port=5000 caps=application/x-rtp ! rtph264depay ! avdec_h264 ! autovideosink
</pre></div>
</div>
</section>
</section>
<section id="how-to-make-a-gstreamer-plugin">
<h2>How to make a gstreamer plugin<a class="headerlink" href="#how-to-make-a-gstreamer-plugin" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p>build develop environment</p></li>
</ol>
<p>.. code-block::</p>
<p>docker run –name gst_dev –rm -i -t -v <code class="docutils literal notranslate"><span class="pre">pwd</span></code>:/workspace restreamio/gstreamer:latest-dev-with-source /bin/bash</p>
<ol class="arabic simple" start="2">
<li><p>定义存储数据的元素的结构</p></li>
<li><p>定义这个元素的类</p></li>
<li><p>定义这个元素的标准宏</p></li>
<li><p>定义返回类型信息的标准函数</p></li>
<li><p>注册这个元素</p></li>
</ol>
</section>
</section>
<section id="reference">
<h1>Reference<a class="headerlink" href="#reference" title="Link to this heading"></a></h1>
<ul class="simple">
<li><p>GStreamer document: https://gitlab.freedesktop.org/gstreamer/gst-docs.git</p></li>
<li><p>GStreamer plugin guide: https://gstreamer.freedesktop.org/documentation/plugin-development/index.html?gi-language=c</p></li>
<li><p>https://github.com/DamZiobro/gstreamerCheatsheet</p></li>
</ul>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="overview.html" class="btn btn-neutral float-left" title="人工智能概论" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tool.html" class="btn btn-neutral float-right" title="v4l-utils" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021 ~ 2023, Walter Fan, Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>